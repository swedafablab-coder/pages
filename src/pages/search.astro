---
import PostStyleLayout from "../layouts/PostStyleLayout.astro";
import "@pagefind/default-ui/css/ui.css";
import "../styles/search.css";
import { searchTitle, searchPlaceholder, searchLabel } from "../config";

const frontmatter = {
  title: searchTitle,
  pubDate: "2000-01-01",
};
---

<PostStyleLayout frontmatter={frontmatter}>
  <div id="search"></div>
</PostStyleLayout>

<script>
  import { PagefindUI } from "@pagefind/default-ui";
  import { searchPlaceholder, searchLabel } from "../config";

  document.addEventListener("astro:page-load", () => {
    const searchDiv = document.getElementById("search");
    if (searchDiv) {
      searchDiv.innerHTML = "";
      new PagefindUI({
        element: "#search",
        bundlePath: "/pagefind/",
        showSubResults: true,
        excerptLength: 40,
        showImages: false,
        translations: {
          placeholder: searchPlaceholder,
          clear_search: "クリア",
          load_more: "もっと見る",
          search_label: searchLabel,
          filters_label: "フィルタ",
          zero_results: "[SEARCH_TERM] の検索結果はありませんでした",
          many_results: "[SEARCH_TERM] の検索結果が [COUNT] 件見つかりました",
          one_result: "[SEARCH_TERM] の検索結果が [COUNT] 件見つかりました",
          alt_search:
            "[SEARCH_TERM] の検索結果はありませんでした。[DIFFERENT_TERM] ではありませんか？",
          search_suggestion:
            "[SEARCH_TERM] の検索結果はありませんでした。次のいずれかをお試しください：",
          searching: "[SEARCH_TERM] を検索中...",
        },
      });
    }
  });
</script>

<style is:global>
  /* PostStyleLayout内での表示調整 */
  #search {
    padding: 20px 0px;
  }
</style>
